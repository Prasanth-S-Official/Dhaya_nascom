<app-adminnav></app-adminnav>
<div class="driver-form-container" [ngClass]="{ blur: successPopup }">
  <button *ngIf="id" type="button" class="back-button" (click)="navigateBack()">Back</button>
  <h2>{{ id ? 'Edit Driver' : 'Add New Driver' }}</h2>
  <hr />

  <form [formGroup]="driverForm" (ngSubmit)="onSubmit()">
    <div>
      <label for="driverName">Name<span class="required">*</span></label>
      <input id="driverName" type="text" formControlName="driverName" />
      <div *ngIf="driverForm.controls['driverName'].touched && driverForm.controls['driverName'].hasError('required')" class="error">
        *Name is required
      </div>
    </div>

    <div>
      <label for="licenseNumber">License Number<span class="required">*</span></label>
      <input id="licenseNumber" type="text" formControlName="licenseNumber" />
      <div *ngIf="driverForm.controls['licenseNumber'].touched && driverForm.controls['licenseNumber'].hasError('required')" class="error">
        *License Number is required
      </div>
    </div>

    <div>
      <label for="experienceYears">Experience Years<span class="required">*</span></label>
      <input id="experienceYears" type="number" formControlName="experienceYears" />
      <div *ngIf="driverForm.controls['experienceYears'].touched && driverForm.controls['experienceYears'].hasError('required')" class="error">
        *Experience is required
      </div>
    </div>

    <div>
      <label for="contactNumber">Contact Number<span class="required">*</span></label>
      <input id="contactNumber" type="text" formControlName="contactNumber" />
      <div *ngIf="driverForm.controls['contactNumber'].touched && driverForm.controls['contactNumber'].hasError('required')" class="error">
        *Contact Number is required
      </div>
    </div>

    <div>
      <label for="vehicleType">Vehicle Type<span class="required">*</span></label>
      <input id="vehicleType" type="text" formControlName="vehicleType" />
      <div *ngIf="driverForm.controls['vehicleType'].touched && driverForm.controls['vehicleType'].hasError('required')" class="error">
        *Vehicle Type is required
      </div>
    </div>

    <div>
      <label for="hourlyRate">Hourly Rate<span class="required">*</span></label>
      <input id="hourlyRate" type="number" formControlName="hourlyRate" />
      <div *ngIf="driverForm.controls['hourlyRate'].touched && driverForm.controls['hourlyRate'].hasError('required')" class="error">
        *Hourly Rate is required
      </div>
    </div>

    <div>
      <label for="address">Address<span class="required">*</span></label>
      <input id="address" type="text" formControlName="address" />
      <div *ngIf="driverForm.controls['address'].touched && driverForm.controls['address'].hasError('required')" class="error">
        *Address is required
      </div>
    </div>

    <div>
      <label for="image">Driver Image<span class="required">*</span></label>
      <input id="image" type="file" (change)="handleFileChange($event)" accept=".jpg, .jpeg, .png" />
      <div *ngIf="fileError" class="error">
        *{{ fileError }}
      </div>
    </div>

    <div *ngIf="showError" class="error">
      All fields are required
    </div>

    <button type="submit" class="submit-button">{{ id ? 'Update Driver' : 'Add Driver' }}</button>
  </form>
</div>

<div *ngIf="successPopup" class="success-popup">
  <div class="success-popup-content">
    <p>{{ id ? 'Driver Updated Successfully!' : 'Driver Added Successfully!' }}</p>
    <button (click)="handleSuccessMessage()" class="ok-button">Ok</button>
  </div>
</div>
