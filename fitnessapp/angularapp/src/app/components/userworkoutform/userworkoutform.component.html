<div>
  <app-usernav></app-usernav>
  <div class="container" [ngClass]="{ blur: successPopup }">
    <div class="button-container">
      <button (click)="navigateBack()">Back</button>
    </div>
    <h2>Workout Application Form</h2>

    <form [formGroup]="workoutForm" (ngSubmit)="onSubmit()">
      <div>
        <label for="age">Age<span class="required">*</span></label>
        <input id="age" type="number" formControlName="age" />
        <div *ngIf="workoutForm.controls['age']?.touched && workoutForm.controls['age'].hasError('required')" class="error">
          *Age is required
        </div>
        <div *ngIf="workoutForm.controls['age']?.touched && workoutForm.controls['age'].hasError('min')" class="error">
          *Age cannot be less than 1
        </div>
        <div *ngIf="workoutForm.controls['age']?.touched && workoutForm.controls['age'].hasError('max')" class="error">
          *Age cannot be more than 120
        </div>
      </div>

      <div>
        <label for="bmi">BMI<span class="required">*</span></label>
        <input id="bmi" type="number" formControlName="bmi" />
        <div *ngIf="workoutForm.controls['bmi']?.touched && workoutForm.controls['bmi'].hasError('required')" class="error">
          *BMI is required
        </div>
        <div *ngIf="workoutForm.controls['bmi']?.touched && workoutForm.controls['bmi'].hasError('min')" class="error">
          *BMI cannot be less than 10
        </div>
        <div *ngIf="workoutForm.controls['bmi']?.touched && workoutForm.controls['bmi'].hasError('max')" class="error">
          *BMI cannot be more than 50
        </div>
      </div>

      <div>
        <label for="gender">Gender<span class="required">*</span></label>
        <select id="gender" formControlName="gender">
          <option value="">Select Gender</option>
          <option value="Male">Male</option>
          <option value="Female">Female</option>
          <option value="Other">Other</option>
        </select>
        <div *ngIf="workoutForm.controls['gender']?.touched && workoutForm.controls['gender'].hasError('required')" class="error">
          *Gender is required
        </div>
      </div>

      <div>
        <label for="dietaryPreferences">Dietary Preferences<span class="required">*</span></label>
        <select id="dietaryPreferences" formControlName="dietaryPreferences">
          <option value="">Select Dietary Preference</option>
          <option value="Vegetarian">Vegetarian</option>
          <option value="Vegan">Vegan</option>
          <option value="Keto">Keto</option>
          <option value="Paleo">Paleo</option>
          <option value="Gluten-free">Gluten-free</option>
          <option value="No preference">No preference</option>
        </select>
        <div *ngIf="workoutForm.controls['dietaryPreferences']?.touched && workoutForm.controls['dietaryPreferences'].hasError('required')" class="error">
          *Dietary Preferences are required
        </div>
      </div>

      <div>
        <label for="medicalHistory">Medical History<span class="required">*</span></label>
        <select id="medicalHistory" formControlName="medicalHistory">
          <option value="">Select Medical History</option>
          <option value="Asthma">Asthma</option>
          <option value="Hypertension">Hypertension</option>
          <option value="Diabetes">Diabetes</option>
          <option value="Heart Disease">Heart Disease</option>
          <option value="None">None</option>
        </select>
        <div *ngIf="workoutForm.controls['medicalHistory']?.touched && workoutForm.controls['medicalHistory'].hasError('required')" class="error">
          *Medical History is required
        </div>
      </div>
      
      <div *ngIf="errorMessage" class="error">
        *{{ errorMessage }}
      </div>

      <div>
        <button type="submit" class="submit-button">Submit</button>
      </div>
    </form>
  </div>
  
  <div *ngIf="successPopup" class="success-popup">
    <p>Successfully Added!</p>
    <button (click)="handleSuccessMessage()">Ok</button>
  </div>
</div>
