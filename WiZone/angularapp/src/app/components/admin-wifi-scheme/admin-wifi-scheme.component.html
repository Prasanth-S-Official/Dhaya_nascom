<app-adminnav></app-adminnav>
<div class="wifi-scheme-form-container" [ngClass]="{ blur: successPopup }">
  <button *ngIf="id" type="button" class="back-button" (click)="navigateBack()">Back</button>
  <h2>{{ id ? 'Edit WiFi Scheme' : 'Create New WiFi Scheme' }}</h2>
  <hr />

  <form [formGroup]="wifiSchemeForm" (ngSubmit)="onSubmit()">
    <div>
      <label for="schemeName">Scheme Name<span class="required">*</span></label>
      <input id="schemeName" type="text" formControlName="schemeName" />
      <div *ngIf="wifiSchemeForm.controls['schemeName'].touched && wifiSchemeForm.controls['schemeName'].hasError('required')" class="error">
        *Scheme Name is required
      </div>
    </div>

    <div>
      <label for="description">Description<span class="required">*</span></label>
      <textarea id="description" formControlName="description"></textarea>
      <div *ngIf="wifiSchemeForm.controls['description'].touched && wifiSchemeForm.controls['description'].hasError('required')" class="error">
        *Description is required
      </div>
    </div>

    <div>
      <label for="region">Region<span class="required">*</span></label>
      <input id="region" type="text" formControlName="region" />
      <div *ngIf="wifiSchemeForm.controls['region'].touched && wifiSchemeForm.controls['region'].hasError('required')" class="error">
        *Region is required
      </div>
    </div>

    <div>
      <label for="speed">Speed<span class="required">*</span></label>
      <input id="speed" type="text" formControlName="speed" />
      <div *ngIf="wifiSchemeForm.controls['speed'].touched && wifiSchemeForm.controls['speed'].hasError('required')" class="error">
        *Speed is required
      </div>
    </div>

    <div>
      <label for="dataLimit">Data Limit<span class="required">*</span></label>
      <input id="dataLimit" type="text" formControlName="dataLimit" />
      <div *ngIf="wifiSchemeForm.controls['dataLimit'].touched && wifiSchemeForm.controls['dataLimit'].hasError('required')" class="error">
        *Data Limit is required
      </div>
    </div>

    <div>
      <label for="fee">Fee<span class="required">*</span></label>
      <input id="fee" type="number" formControlName="fee" />
      <div *ngIf="wifiSchemeForm.controls['fee'].touched && wifiSchemeForm.controls['fee'].hasError('required')" class="error">
        *Fee is required
      </div>
    </div>

    <div>
      <label for="availabilityStatus">Availability<span class="required">*</span></label>
      <select id="availabilityStatus" formControlName="availabilityStatus">
        <option value="Available">Available</option>
        <option value="Unavailable">Unavailable</option>
      </select>
    </div>

    <div *ngIf="errorMessage" class="error">
      *{{ errorMessage }}
    </div>

    <button type="submit" class="submit-button">{{ id ? 'Update WiFi Scheme' : 'Add WiFi Scheme' }}</button>
  </form>
</div>

<div *ngIf="successPopup" class="success-popup">
  <div class="success-popup-content">
    <p>{{ id ? 'WiFi Scheme Updated Successfully!' : 'WiFi Scheme Added Successfully!' }}</p>
    <button (click)="handleSuccessMessage()" class="ok-button">Ok</button>
  </div>
</div>
