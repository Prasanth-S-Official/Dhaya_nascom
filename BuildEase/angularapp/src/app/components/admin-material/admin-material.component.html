<app-adminnav></app-adminnav>
<div class="material-form-container" [ngClass]="{ blur: successPopup }">
  <button *ngIf="id" type="button" class="back-button" (click)="navigateBack()">Back</button>
  <h2>{{ id ? 'Edit Material' : 'Create New Material' }}</h2>
  <hr />

  <form [formGroup]="materialForm" (ngSubmit)="onSubmit()">
    <div>
      <label for="materialName">Material Name<span class="required">*</span></label>
      <input id="materialName" type="text" formControlName="materialName" />
      <div *ngIf="materialForm.controls['materialName'].touched && materialForm.controls['materialName'].hasError('required')" class="error">
        *Material Name is required
      </div>
    </div>

    <div>
      <label for="description">Description<span class="required">*</span></label>
      <textarea id="description" formControlName="description"></textarea>
      <div *ngIf="materialForm.controls['description'].touched && materialForm.controls['description'].hasError('required')" class="error">
        *Description is required
      </div>
    </div>

    <div>
      <label for="category">Category<span class="required">*</span></label>
      <input id="category" type="text" formControlName="category" />
      <div *ngIf="materialForm.controls['category'].touched && materialForm.controls['category'].hasError('required')" class="error">
        *Category is required
      </div>
    </div>

    <div>
      <label for="pricePerUnit">Price Per Unit<span class="required">*</span></label>
      <input id="pricePerUnit" type="number" formControlName="pricePerUnit" />
      <div *ngIf="materialForm.controls['pricePerUnit'].touched && materialForm.controls['pricePerUnit'].hasError('required')" class="error">
        *Price Per Unit is required
      </div>
    </div>

    <div>
      <label for="unitType">Unit Type<span class="required">*</span></label>
      <input id="unitType" type="text" formControlName="unitType" />
      <div *ngIf="materialForm.controls['unitType'].touched && materialForm.controls['unitType'].hasError('required')" class="error">
        *Unit Type is required
      </div>
    </div>

    <div>
      <label for="availabilityStatus">Availability<span class="required">*</span></label>
      <select id="availabilityStatus" formControlName="availabilityStatus">
        <option value="In Stock">In Stock</option>
        <option value="Out of Stock">Out of Stock</option>
      </select>
    </div>

    <div *ngIf="errorMessage" class="error">
      *{{ errorMessage }}
    </div>

    <button type="submit" class="submit-button">{{ id ? 'Update Material' : 'Add Material' }}</button>
  </form>
</div>

<div *ngIf="successPopup" class="success-popup">
  <div class="success-popup-content">
    <p>{{ id ? 'Material Updated Successfully!' : 'Material Added Successfully!' }}</p>
    <button (click)="handleSuccessMessage()" class="ok-button">Ok</button>
  </div>
</div>
