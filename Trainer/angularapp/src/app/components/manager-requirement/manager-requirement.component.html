<app-managernav></app-managernav>
<div class="requirement-form-container" [ngClass]="{ blur: successPopup }">
  <button *ngIf="id" type="button" class="back-button" (click)="navigateBack()">Back</button>
  <h2>{{ id ? 'Edit Requirement' : 'Create New Requirement' }}</h2>
  <hr />

  <form [formGroup]="requirementForm" (ngSubmit)="onSubmit()">
    <div>
      <label for="title">Title<span class="required">*</span></label>
      <input id="title" type="text" formControlName="title" />
      <div *ngIf="requirementForm.controls['title'].touched && requirementForm.controls['title'].hasError('required')" class="error">
        *Title is required
      </div>
    </div>

    <div>
      <label for="description">Description<span class="required">*</span></label>
      <textarea id="description" formControlName="description"></textarea>
      <div *ngIf="requirementForm.controls['description'].touched && requirementForm.controls['description'].hasError('required')" class="error">
        *Description is required
      </div>
    </div>

    <div>
      <label for="department">Department<span class="required">*</span></label>
      <input id="department" type="text" formControlName="department" />
      <div *ngIf="requirementForm.controls['department'].touched && requirementForm.controls['department'].hasError('required')" class="error">
        *Department is required
      </div>
    </div>

    <div>
      <label for="duration">Duration<span class="required">*</span></label>
      <input id="duration" type="text" formControlName="duration" />
      <div *ngIf="requirementForm.controls['duration'].touched && requirementForm.controls['duration'].hasError('required')" class="error">
        *Duration is required
      </div>
    </div>

    <div>
      <label for="mode">Mode<span class="required">*</span></label>
      <select id="mode" formControlName="mode">
        <option value="" disabled>Select Mode</option>
        <option value="Online">Online</option>
        <option value="Offline">Offline</option>
      </select>
      <div *ngIf="requirementForm.controls['mode'].touched && requirementForm.controls['mode'].hasError('required')" class="error">
        *Mode is required
      </div>
    </div>

    <div>
      <label for="location">Location</label>
      <input id="location" type="text" formControlName="location" />
    </div>

    <div>
      <label for="skillLevel">Skill Level<span class="required">*</span></label>
      <select id="skillLevel" formControlName="skillLevel">
        <option value="" disabled>Select Skill Level</option>
        <option value="Beginner">Beginner</option>
        <option value="Intermediate">Intermediate</option>
        <option value="Advanced">Advanced</option>
      </select>
      <div *ngIf="requirementForm.controls['skillLevel'].touched && requirementForm.controls['skillLevel'].hasError('required')" class="error">
        *Skill Level is required
      </div>
    </div>

    <div>
      <label for="budget">Budget<span class="required">*</span></label>
      <input id="budget" type="number" formControlName="budget" />
      <div *ngIf="requirementForm.controls['budget'].touched && requirementForm.controls['budget'].hasError('required')" class="error">
        *Budget is required
      </div>
    </div>

    <div>
      <label for="priority">Priority</label>
      <select id="priority" formControlName="priority">
        <option value="High">High</option>
        <option value="Medium">Medium</option>
        <option value="Low">Low</option>
      </select>
    </div>

    <div *ngIf="errorMessage" class="error">
      *{{ errorMessage }}
    </div>

    <button type="submit" class="submit-button">{{ id ? 'Update Requirement' : 'Add Requirement' }}</button>
  </form>
</div>

<div *ngIf="successPopup" class="success-popup">
  <div class="success-popup-content">
    <p>{{ id ? 'Requirement Updated Successfully!' : 'Requirement Added Successfully!' }}</p>
    <button (click)="handleSuccessMessage()" class="ok-button">Ok</button>
  </div>
</div>
